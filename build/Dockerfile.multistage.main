#
# Builder
#

FROM golang:1.21.0-alpine AS builder

#COPY go.mod /github.com/go-park-mail-ru/2023_2_potatiki/

COPY ../. /github.com/go-park-mail-ru/2023_2_potatiki/
WORKDIR /github.com/go-park-mail-ru/2023_2_potatiki/

RUN go mod download
RUN go clean --modcache
RUN go build -o ./.bin ./cmd/main/main.go

#
# Runner
#

#FROM scratch AS runner

#WORKDIR /docker-zuzu/

ENV TZ="Europe/Moscow"
ENV ZONEINFO=/zoneinfo.zip
EXPOSE 80 443

#COPY --from=builder /.bin /.bin

ENTRYPOINT ["./.bin"]